# Portfolio/Positions Page Tasks

**Module:** Portfolio/Positions Page  
**Priority:** Medium  
**Dependencies:** Trades page, UI framework  
**Estimated Time:** 4-5 days  

## Tasks

### 1. Build portfolio overview with P&L summary cards
- [ ] Create PortfolioOverview component
- [ ] Add realized P&L card (closed trades)
- [ ] Build unrealized P&L card (open positions)
- [ ] Add total P&L card (combined)
- [ ] Create portfolio value display
- [ ] Add last updated timestamp
- [ ] Implement real-time P&L updates

### 2. Create open positions table with real-time P&L
- [ ] Build PositionsTable component
- [ ] Add 12 required columns (Symbol, Type, Position, etc.)
- [ ] Implement real-time price updates
- [ ] Add unrealized P&L calculations
- [ ] Create position size indicators
- [ ] Add days held calculation
- [ ] Implement position filtering

### 3. Implement position detail expansion with trade history
- [ ] Create PositionDetailExpansion component
- [ ] Add trade history display
- [ ] Build weighted average entry calculation
- [ ] Add current status information
- [ ] Create position action buttons
- [ ] Implement expansion/collapse animation
- [ ] Add position notes and attachments

### 4. Build portfolio allocation charts (asset class, sector, strategy)
- [ ] Create PortfolioAllocation widget
- [ ] Build asset class donut chart (Equity, Futures, Options)
- [ ] Add sector allocation chart
- [ ] Create strategy allocation chart
- [ ] Add click-to-filter functionality
- [ ] Implement allocation percentages
- [ ] Add allocation trend tracking

### 5. Create risk metrics panel (concentration, correlation)
- [ ] Build RiskMetricsPanel component
- [ ] Add portfolio heat calculation
- [ ] Create largest position tracking
- [ ] Build sector concentration analysis
- [ ] Add correlation matrix display
- [ ] Create risk warnings and alerts
- [ ] Implement risk score calculation

### 6. Implement position management actions (exit, modify SL/Target)
- [ ] Create PositionActions component
- [ ] Add quick exit functionality
- [ ] Build partial exit capability
- [ ] Create SL/Target modification
- [ ] Add position addition feature
- [ ] Implement action confirmations
- [ ] Add action history tracking

### 7. Build portfolio performance chart with benchmark comparison
- [ ] Create PortfolioPerformanceChart component
- [ ] Build portfolio value time series
- [ ] Add NIFTY50 benchmark comparison
- [ ] Create drawdown overlay
- [ ] Add trade entry/exit markers
- [ ] Implement chart interactions
- [ ] Add performance metrics overlay

## Acceptance Criteria
- [ ] Portfolio overview displays accurate P&L
- [ ] Positions table shows real-time data
- [ ] Position details expand correctly
- [ ] Allocation charts are interactive
- [ ] Risk metrics are calculated properly
- [ ] Position actions work correctly
